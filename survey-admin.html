<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPF ì„¤ë¬¸ íŒì—… ê´€ë¦¬ì</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="bg-white rounded-lg shadow-lg p-8">
            <h1 class="text-3xl font-bold mb-8 text-center text-gray-800">
                ğŸª BPF ì„¤ë¬¸ íŒì—… ê´€ë¦¬ì
            </h1>
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- ì„¤ë¬¸ ë§í¬ ì„¤ì • -->
                <div class="bg-blue-50 rounded-lg p-6">
                    <h2 class="text-xl font-bold mb-4 text-blue-800">ğŸ“ ì„¤ë¬¸ ë§í¬ ì„¤ì •</h2>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Google Forms ë˜ëŠ” ì™¸ë¶€ ì„¤ë¬¸ ë§í¬
                        </label>
                        <input type="url" id="surveyUrl" 
                               placeholder="https://forms.gle/your-form-id"
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <button onclick="updateSurveyLink()" 
                            class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition">
                        ğŸ”— ë§í¬ ì—…ë°ì´íŠ¸
                    </button>
                    
                    <div id="linkStatus" class="mt-4 text-sm"></div>
                </div>
                
                <!-- íŒì—… í…ŒìŠ¤íŠ¸ -->
                <div class="bg-green-50 rounded-lg p-6">
                    <h2 class="text-xl font-bold mb-4 text-green-800">ğŸ§ª íŒì—… í…ŒìŠ¤íŠ¸</h2>
                    
                    <div class="space-y-4">
                        <button onclick="testPopup()" 
                                class="w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition">
                            ğŸ¯ íŒì—… ë¯¸ë¦¬ë³´ê¸°
                        </button>
                        
                        <button onclick="resetCookie()" 
                                class="w-full bg-yellow-600 text-white py-3 px-4 rounded-lg hover:bg-yellow-700 transition">
                            ğŸ”„ ì¿ í‚¤ ë¦¬ì…‹ (ë‹¤ì‹œ í‘œì‹œë˜ê²Œ í•˜ê¸°)
                        </button>
                        
                        <button onclick="clearAllData()" 
                                class="w-full bg-red-600 text-white py-3 px-4 rounded-lg hover:bg-red-700 transition">
                            ğŸ—‘ï¸ ëª¨ë“  ë°ì´í„° ì´ˆê¸°í™”
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- ì„¤ì • ì •ë³´ -->
            <div class="mt-8 bg-gray-50 rounded-lg p-6">
                <h2 class="text-xl font-bold mb-4 text-gray-800">â„¹ï¸ íŒì—… ì„¤ì • ì •ë³´</h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-semibold text-gray-700 mb-2">ğŸ“‹ ìˆ˜ì§‘ ë°ì´í„°</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>â€¢ ì´ë¦„ (ìµœëŒ€ 50ì)</li>
                            <li>â€¢ êµ­ì  (ë“œë¡­ë‹¤ìš´ ì„ íƒ)</li>
                            <li>â€¢ ê´€ì‹¬ í”„ë¡œê·¸ë¨ (ë‹¤ì¤‘ ì„ íƒ)</li>
                            <li>â€¢ ê¸°ëŒ€í‰/ê¶ê¸ˆí•œ ì  (ìµœëŒ€ 200ì)</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="font-semibold text-gray-700 mb-2">âš™ï¸ ë™ì‘ ì„¤ì •</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>â€¢ í˜ì´ì§€ ë¡œë“œ 2ì´ˆ í›„ í‘œì‹œ</li>
                            <li>â€¢ ì²« ë°©ë¬¸ìë§Œ í‘œì‹œ</li>
                            <li>â€¢ ì°¸ì—¬ í›„ 30ì¼ê°„ í‘œì‹œ ì•ˆí•¨</li>
                            <li>â€¢ í•œ/ì˜ ìë™ ì–¸ì–´ ê°ì§€</li>
                            <li>â€¢ GA4 ì´ë²¤íŠ¸ ìë™ ì¶”ì </li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-yellow-100 rounded-lg">
                    <h4 class="font-semibold text-yellow-800 mb-2">ğŸ”§ ì„¤ì • ë°©ë²•</h4>
                    <ol class="text-sm text-yellow-700 space-y-1">
                        <li>1. Google Formsì—ì„œ ì„¤ë¬¸ì§€ ìƒì„±</li>
                        <li>2. "ë³´ë‚´ê¸°" â†’ "ë§í¬" â†’ URL ë³µì‚¬</li>
                        <li>3. ìœ„ "ì„¤ë¬¸ ë§í¬ ì„¤ì •"ì— ë¶™ì—¬ë„£ê¸°</li>
                        <li>4. "ë§í¬ ì—…ë°ì´íŠ¸" ë²„íŠ¼ í´ë¦­</li>
                        <li>5. "íŒì—… ë¯¸ë¦¬ë³´ê¸°"ë¡œ í…ŒìŠ¤íŠ¸</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <!-- Survey Popup Integration -->
    <script src="survey-popup.js"></script>
    
    <script>
        function updateSurveyLink() {
            const url = document.getElementById('surveyUrl').value;
            const status = document.getElementById('linkStatus');
            
            if (!url) {
                status.innerHTML = '<span class="text-red-600">âŒ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”</span>';
                return;
            }
            
            try {
                new URL(url); // URL ìœ íš¨ì„± ê²€ì‚¬
                
                if (typeof surveyPopup !== 'undefined') {
                    surveyPopup.updateSurveyUrl(url);
                    localStorage.setItem('bpf_survey_url', url);
                    status.innerHTML = '<span class="text-green-600">âœ… ì„¤ë¬¸ ë§í¬ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤</span>';
                } else {
                    status.innerHTML = '<span class="text-red-600">âŒ íŒì—… ì‹œìŠ¤í…œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</span>';
                }
            } catch (e) {
                status.innerHTML = '<span class="text-red-600">âŒ ì˜¬ë°”ë¥¸ URL í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤</span>';
            }
        }
        
        function testPopup() {
            if (typeof surveyPopup !== 'undefined') {
                // ì¿ í‚¤ ì„ì‹œ ì‚­ì œí•˜ê³  íŒì—… í‘œì‹œ
                const originalCookie = document.cookie.match(/bpf_survey_completed=([^;]*)/);
                document.cookie = 'bpf_survey_completed=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
                
                setTimeout(() => {
                    surveyPopup.showPopup();
                    
                    // ì›ë˜ ì¿ í‚¤ ë³µì› (5ì´ˆ í›„)
                    setTimeout(() => {
                        if (originalCookie) {
                            document.cookie = `bpf_survey_completed=${originalCookie[1]}; path=/; max-age=2592000`;
                        }
                    }, 5000);
                }, 100);
            } else {
                alert('íŒì—… ì‹œìŠ¤í…œì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
            }
        }
        
        function resetCookie() {
            document.cookie = 'bpf_survey_completed=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            alert('âœ… ì¿ í‚¤ê°€ ë¦¬ì…‹ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ íŒì—…ì´ ë‹¤ì‹œ í‘œì‹œë©ë‹ˆë‹¤.');
        }
        
        function clearAllData() {
            if (confirm('ì •ë§ë¡œ ëª¨ë“  ì„¤ë¬¸ ê´€ë ¨ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ì¿ í‚¤ ì‚­ì œ
                document.cookie = 'bpf_survey_completed=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
                
                // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì‚­ì œ
                localStorage.removeItem('bpf_survey_url');
                
                // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                document.getElementById('surveyUrl').value = '';
                document.getElementById('linkStatus').innerHTML = '';
                
                alert('âœ… ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ì €ì¥ëœ URL ë³µì›
        window.addEventListener('DOMContentLoaded', function() {
            const savedUrl = localStorage.getItem('bpf_survey_url');
            if (savedUrl) {
                document.getElementById('surveyUrl').value = savedUrl;
                if (typeof surveyPopup !== 'undefined') {
                    surveyPopup.updateSurveyUrl(savedUrl);
                }
            }
        });
    </script>
</body>
</html>